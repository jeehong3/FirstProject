<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.farmstory.mapper.DiaryMapper">

	<insert id="insertDiary" parameterType="Diary">
	<selectKey resultType="int" keyProperty="diaNo" order="AFTER">
			SELECT LAST_INSERT_ID()
	</selectKey>
	INSERT INTO DIARY (DIA_DATE, DIA_TITLE, DIA_CONTENT)
	VALUES (#{diaDate}, #{diaTitle}, #{diaContent})
	</insert>
	
	<insert id="insertDiaryImage" parameterType="DiaryImg">
	INSERT INTO DIARY_IMG (DII_IMG, DIA_NO)
	VALUES (#{diiImg}, #{diaNo})
	</insert>
</mapper>  